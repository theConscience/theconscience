{% load userprofiles_extras i18n %} <form action="" id="code_edit_form"> {% csrf_token %} <div class="form-group"><label for="{{ code_form.title.auto_id }}" class="form-control">{{ code_form.title.label }}</label>{{ code_form.title|attr:'class=form-control' }}</div><div class="form-group"><label for="{{ code_form.tag.auto_id }}" class="form-control">{{ code_form.tag.label }}</label>{{ code_form.tag|attr:'class=form-control' }}<p class="help-block">Укажите метку для поиска вашего примера</p></div><div class="form-group"><label for="{{ code_form.description.auto_id }}" class="form-control">{{ code_form.description.label }}</label>{{ code_form.description|attr:'class=form-control input-xs' }}</div><div class="form-group"><label for="{{ code_form.code.auto_id }}" class="form-control">{{ code_form.code.label }}</label>{{ code_form.code|attr:'class=form-control' }}</div></form><button type="submit" form="code_edit_form" class="btn btn-standard pull-right">{% trans "Сохранить" %}</button><script>$("#code_edit_form").submit(function(e){e.preventDefault();var t="{% url 'code_edit' code_id=code.id %}",a=$(this).find("input[name='title']").val(),i=$(this).find("select[name='tag']").val(),n=$(this).find("textarea[name='description']").val(),o=$(this).find("textarea[name='code']").val();$.post(t,{title:a,tag:i,description:n,code:o},function(e){for(var t in e)$("#code_edit_form").prepend('<div class="alert  alert-'+t+'">'+e[t]+"</div>");setTimeout(parent.$.fancybox.close,2500),location.reload()})})</script>